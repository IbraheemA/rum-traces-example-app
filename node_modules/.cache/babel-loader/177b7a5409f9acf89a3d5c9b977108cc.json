{"ast":null,"code":"var _a;\nimport { __assign, __decorate } from \"tslib\";\nimport { combine, createContextManager, ErrorSource, includes, monitored, display } from '@datadog/browser-core';\nexport var StatusType = {\n  debug: 'debug',\n  error: 'error',\n  info: 'info',\n  warn: 'warn'\n};\nvar STATUS_PRIORITIES = (_a = {}, _a[StatusType.debug] = 0, _a[StatusType.info] = 1, _a[StatusType.warn] = 2, _a[StatusType.error] = 3, _a);\nexport var STATUSES = Object.keys(StatusType);\nexport var HandlerType = {\n  console: 'console',\n  http: 'http',\n  silent: 'silent'\n};\nvar Logger = /** @class */function () {\n  function Logger(sendLog, handlerType, level, loggerContext) {\n    if (handlerType === void 0) {\n      handlerType = HandlerType.http;\n    }\n    if (level === void 0) {\n      level = StatusType.debug;\n    }\n    if (loggerContext === void 0) {\n      loggerContext = {};\n    }\n    this.sendLog = sendLog;\n    this.handlerType = handlerType;\n    this.level = level;\n    this.contextManager = createContextManager();\n    this.contextManager.set(loggerContext);\n  }\n  Logger.prototype.log = function (message, messageContext, status) {\n    if (status === void 0) {\n      status = StatusType.info;\n    }\n    if (STATUS_PRIORITIES[status] >= STATUS_PRIORITIES[this.level]) {\n      var handlers = Array.isArray(this.handlerType) ? this.handlerType : [this.handlerType];\n      if (includes(handlers, HandlerType.http)) {\n        this.sendLog(__assign({\n          message: message,\n          status: status\n        }, combine(this.contextManager.get(), messageContext)));\n      }\n      if (includes(handlers, HandlerType.console)) {\n        display.log(status + \": \" + message, combine(this.contextManager.get(), messageContext));\n      }\n    }\n  };\n  Logger.prototype.debug = function (message, messageContext) {\n    this.log(message, messageContext, StatusType.debug);\n  };\n  Logger.prototype.info = function (message, messageContext) {\n    this.log(message, messageContext, StatusType.info);\n  };\n  Logger.prototype.warn = function (message, messageContext) {\n    this.log(message, messageContext, StatusType.warn);\n  };\n  Logger.prototype.error = function (message, messageContext) {\n    var errorOrigin = {\n      error: {\n        origin: ErrorSource.LOGGER\n      }\n    };\n    this.log(message, combine(errorOrigin, messageContext), StatusType.error);\n  };\n  Logger.prototype.setContext = function (context) {\n    this.contextManager.set(context);\n  };\n  Logger.prototype.addContext = function (key, value) {\n    this.contextManager.add(key, value);\n  };\n  Logger.prototype.removeContext = function (key) {\n    this.contextManager.remove(key);\n  };\n  Logger.prototype.setHandler = function (handler) {\n    this.handlerType = handler;\n  };\n  Logger.prototype.setLevel = function (level) {\n    this.level = level;\n  };\n  __decorate([monitored], Logger.prototype, \"log\", null);\n  return Logger;\n}();\nexport { Logger };","map":{"version":3,"names":["combine","createContextManager","ErrorSource","includes","monitored","display","StatusType","debug","error","info","warn","STATUS_PRIORITIES","_a","STATUSES","Object","keys","HandlerType","console","http","silent","Logger","sendLog","handlerType","level","loggerContext","contextManager","set","prototype","log","message","messageContext","status","handlers","Array","isArray","__assign","get","errorOrigin","origin","LOGGER","setContext","context","addContext","key","value","add","removeContext","remove","setHandler","handler","setLevel","__decorate"],"sources":["../../src/domain/logger.ts"],"sourcesContent":[null],"mappings":";;AAAA,SACEA,OAAO,EAGPC,oBAAoB,EACpBC,WAAW,EACXC,QAAQ,EACRC,SAAS,EACTC,OAAO,QACF,uBAAuB;AAE9B,OAAO,IAAMC,UAAU,GAAG;EACxBC,KAAK,EAAE,OAAO;EACdC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE;CACE;AAIV,IAAMC,iBAAiB,IAAAC,EAAA,OACrBA,EAAA,CAACN,UAAU,CAACC,KAAK,IAAG,CAAC,EACrBK,EAAA,CAACN,UAAU,CAACG,IAAI,IAAG,CAAC,EACpBG,EAAA,CAACN,UAAU,CAACI,IAAI,IAAG,CAAC,EACpBE,EAAA,CAACN,UAAU,CAACE,KAAK,IAAG,CAAC,E,GACtB;AAED,OAAO,IAAMK,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAACT,UAAU,CAAiB;AAQ/D,OAAO,IAAMU,WAAW,GAAG;EACzBC,OAAO,EAAE,SAAS;EAClBC,IAAI,EAAE,MAAM;EACZC,MAAM,EAAE;CACA;AAIV,IAAAC,MAAA;EAGE,SAAAA,OACUC,OAAuC,EACvCC,WAA2D,EAC3DC,KAAoC,EAC5CC,aAA2B;IAFnB,IAAAF,WAAA;MAAAA,WAAA,GAA2CN,WAAW,CAACE,IAAI;IAAA;IAC3D,IAAAK,KAAA;MAAAA,KAAA,GAAoBjB,UAAU,CAACC,KAAK;IAAA;IAC5C,IAAAiB,aAAA;MAAAA,aAAA,KAA2B;IAAA;IAHnB,KAAAH,OAAO,GAAPA,OAAO;IACP,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,KAAK,GAALA,KAAK;IALP,KAAAE,cAAc,GAAGxB,oBAAoB,EAAE;IAQ7C,IAAI,CAACwB,cAAc,CAACC,GAAG,CAACF,aAAa,CAAC;EACxC;EAGAJ,MAAA,CAAAO,SAAA,CAAAC,GAAG,GAAH,UAAIC,OAAe,EAAEC,cAAuB,EAAEC,MAAoC;IAApC,IAAAA,MAAA;MAAAA,MAAA,GAAqBzB,UAAU,CAACG,IAAI;IAAA;IAChF,IAAIE,iBAAiB,CAACoB,MAAM,CAAC,IAAIpB,iBAAiB,CAAC,IAAI,CAACY,KAAK,CAAC,EAAE;MAC9D,IAAMS,QAAQ,GAAGC,KAAK,CAACC,OAAO,CAAC,IAAI,CAACZ,WAAW,CAAC,GAAG,IAAI,CAACA,WAAW,GAAG,CAAC,IAAI,CAACA,WAAW,CAAC;MAExF,IAAInB,QAAQ,CAAC6B,QAAQ,EAAEhB,WAAW,CAACE,IAAI,CAAC,EAAE;QACxC,IAAI,CAACG,OAAO,CAAAc,QAAA;UAAGN,OAAO,EAAAA,OAAA;UAAEE,MAAM,EAAAA;QAAA,GAAK/B,OAAO,CAAC,IAAI,CAACyB,cAAc,CAACW,GAAG,EAAE,EAAEN,cAAc,CAAC,EAAG;;MAG1F,IAAI3B,QAAQ,CAAC6B,QAAQ,EAAEhB,WAAW,CAACC,OAAO,CAAC,EAAE;QAC3CZ,OAAO,CAACuB,GAAG,CAAIG,MAAM,UAAKF,OAAS,EAAE7B,OAAO,CAAC,IAAI,CAACyB,cAAc,CAACW,GAAG,EAAE,EAAEN,cAAc,CAAC,CAAC;;;EAG9F,CAAC;EAEDV,MAAA,CAAAO,SAAA,CAAApB,KAAK,GAAL,UAAMsB,OAAe,EAAEC,cAAuB;IAC5C,IAAI,CAACF,GAAG,CAACC,OAAO,EAAEC,cAAc,EAAExB,UAAU,CAACC,KAAK,CAAC;EACrD,CAAC;EAEDa,MAAA,CAAAO,SAAA,CAAAlB,IAAI,GAAJ,UAAKoB,OAAe,EAAEC,cAAuB;IAC3C,IAAI,CAACF,GAAG,CAACC,OAAO,EAAEC,cAAc,EAAExB,UAAU,CAACG,IAAI,CAAC;EACpD,CAAC;EAEDW,MAAA,CAAAO,SAAA,CAAAjB,IAAI,GAAJ,UAAKmB,OAAe,EAAEC,cAAuB;IAC3C,IAAI,CAACF,GAAG,CAACC,OAAO,EAAEC,cAAc,EAAExB,UAAU,CAACI,IAAI,CAAC;EACpD,CAAC;EAEDU,MAAA,CAAAO,SAAA,CAAAnB,KAAK,GAAL,UAAMqB,OAAe,EAAEC,cAAuB;IAC5C,IAAMO,WAAW,GAAG;MAClB7B,KAAK,EAAE;QACL8B,MAAM,EAAEpC,WAAW,CAACqC;;KAEvB;IACD,IAAI,CAACX,GAAG,CAACC,OAAO,EAAE7B,OAAO,CAACqC,WAAW,EAAEP,cAAc,CAAC,EAAExB,UAAU,CAACE,KAAK,CAAC;EAC3E,CAAC;EAEDY,MAAA,CAAAO,SAAA,CAAAa,UAAU,GAAV,UAAWC,OAAe;IACxB,IAAI,CAAChB,cAAc,CAACC,GAAG,CAACe,OAAO,CAAC;EAClC,CAAC;EAEDrB,MAAA,CAAAO,SAAA,CAAAe,UAAU,GAAV,UAAWC,GAAW,EAAEC,KAAU;IAChC,IAAI,CAACnB,cAAc,CAACoB,GAAG,CAACF,GAAG,EAAEC,KAAK,CAAC;EACrC,CAAC;EAEDxB,MAAA,CAAAO,SAAA,CAAAmB,aAAa,GAAb,UAAcH,GAAW;IACvB,IAAI,CAAClB,cAAc,CAACsB,MAAM,CAACJ,GAAG,CAAC;EACjC,CAAC;EAEDvB,MAAA,CAAAO,SAAA,CAAAqB,UAAU,GAAV,UAAWC,OAAoC;IAC7C,IAAI,CAAC3B,WAAW,GAAG2B,OAAO;EAC5B,CAAC;EAED7B,MAAA,CAAAO,SAAA,CAAAuB,QAAQ,GAAR,UAAS3B,KAAiB;IACxB,IAAI,CAACA,KAAK,GAAGA,KAAK;EACpB,CAAC;EArDD4B,UAAA,EADC/C,SAAS,C,gCAaT;EA0CH,OAAAgB,MAAC;CAAA,CAnED;SAAaA,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module"}