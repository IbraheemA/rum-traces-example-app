{"ast":null,"code":"import { toServerDuration, relativeToClocks, generateUUID } from '@datadog/browser-core';\nimport { RumEventType } from '../../../rawRumEvent.types';\nimport { LifeCycleEventType } from '../../lifeCycle';\nexport function startLongTaskCollection(lifeCycle) {\n  lifeCycle.subscribe(LifeCycleEventType.PERFORMANCE_ENTRY_COLLECTED, function (entry) {\n    if (entry.entryType !== 'longtask') {\n      return;\n    }\n    var startClocks = relativeToClocks(entry.startTime);\n    var rawRumEvent = {\n      date: startClocks.timeStamp,\n      long_task: {\n        id: generateUUID(),\n        duration: toServerDuration(entry.duration)\n      },\n      type: RumEventType.LONG_TASK\n    };\n    lifeCycle.notify(LifeCycleEventType.RAW_RUM_EVENT_COLLECTED, {\n      rawRumEvent: rawRumEvent,\n      startTime: startClocks.relative,\n      domainContext: {\n        performanceEntry: entry.toJSON()\n      }\n    });\n  });\n}","map":{"version":3,"names":["toServerDuration","relativeToClocks","generateUUID","RumEventType","LifeCycleEventType","startLongTaskCollection","lifeCycle","subscribe","PERFORMANCE_ENTRY_COLLECTED","entry","entryType","startClocks","startTime","rawRumEvent","date","timeStamp","long_task","id","duration","type","LONG_TASK","notify","RAW_RUM_EVENT_COLLECTED","relative","domainContext","performanceEntry","toJSON"],"sources":["../../../../src/domain/rumEventsCollection/longTask/longTaskCollection.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,gBAAgB,EAAEC,YAAY,QAAQ,uBAAuB;AACxF,SAA8BC,YAAY,QAAQ,4BAA4B;AAC9E,SAAoBC,kBAAkB,QAAQ,iBAAiB;AAE/D,OAAM,SAAUC,uBAAuBA,CAACC,SAAoB;EAC1DA,SAAS,CAACC,SAAS,CAACH,kBAAkB,CAACI,2BAA2B,EAAE,UAACC,KAAK;IACxE,IAAIA,KAAK,CAACC,SAAS,KAAK,UAAU,EAAE;MAClC;;IAEF,IAAMC,WAAW,GAAGV,gBAAgB,CAACQ,KAAK,CAACG,SAAS,CAAC;IACrD,IAAMC,WAAW,GAAwB;MACvCC,IAAI,EAAEH,WAAW,CAACI,SAAS;MAC3BC,SAAS,EAAE;QACTC,EAAE,EAAEf,YAAY,EAAE;QAClBgB,QAAQ,EAAElB,gBAAgB,CAACS,KAAK,CAACS,QAAQ;OAC1C;MACDC,IAAI,EAAEhB,YAAY,CAACiB;KACpB;IACDd,SAAS,CAACe,MAAM,CAACjB,kBAAkB,CAACkB,uBAAuB,EAAE;MAC3DT,WAAW,EAAAA,WAAA;MACXD,SAAS,EAAED,WAAW,CAACY,QAAQ;MAC/BC,aAAa,EAAE;QAAEC,gBAAgB,EAAEhB,KAAK,CAACiB,MAAM;MAAE;KAClD,CAAC;EACJ,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module"}