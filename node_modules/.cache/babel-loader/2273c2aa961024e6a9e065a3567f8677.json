{"ast":null,"code":"'use strict';\n\nconst {\n  AUTO_KEEP\n} = require('../../../../ext/priority');\n\n// the lowercase, hex encoded upper 64 bits of a 128-bit trace id, if present\nconst TRACE_ID_128 = '_dd.p.tid';\nclass DatadogSpanContext {\n  constructor(props) {\n    props = props || {};\n    this._traceId = props.traceId;\n    this._spanId = props.spanId;\n    this._isRemote = props.isRemote ?? true;\n    this._parentId = props.parentId || null;\n    this._name = props.name;\n    this._isFinished = props.isFinished || false;\n    this._tags = props.tags || {};\n    this._sampling = props.sampling || {};\n    this._spanSampling = undefined;\n    this._links = props.links || [];\n    this._baggageItems = props.baggageItems || {};\n    this._traceparent = props.traceparent;\n    this._tracestate = props.tracestate;\n    this._noop = props.noop || null;\n    this._trace = props.trace || {\n      started: [],\n      finished: [],\n      tags: {}\n    };\n    this._otelSpanContext = undefined;\n  }\n  toTraceId() {\n    let get128bitId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (get128bitId) {\n      return this._traceId.toBuffer().length <= 8 && this._trace.tags[TRACE_ID_128] ? this._trace.tags[TRACE_ID_128] + this._traceId.toString(16).padStart(16, '0') : this._traceId.toString(16).padStart(32, '0');\n    }\n    return this._traceId.toString(10);\n  }\n  toSpanId() {\n    let get128bitId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (get128bitId) {\n      return this._spanId.toString(16).padStart(16, '0');\n    }\n    return this._spanId.toString(10);\n  }\n  toTraceparent() {\n    const flags = this._sampling.priority >= AUTO_KEEP ? '01' : '00';\n    const traceId = this.toTraceId(true);\n    const spanId = this.toSpanId(true);\n    const version = this._traceparent && this._traceparent.version || '00';\n    return `${version}-${traceId}-${spanId}-${flags}`;\n  }\n}\nmodule.exports = DatadogSpanContext;","map":{"version":3,"names":["AUTO_KEEP","require","TRACE_ID_128","DatadogSpanContext","constructor","props","_traceId","traceId","_spanId","spanId","_isRemote","isRemote","_parentId","parentId","_name","name","_isFinished","isFinished","_tags","tags","_sampling","sampling","_spanSampling","undefined","_links","links","_baggageItems","baggageItems","_traceparent","traceparent","_tracestate","tracestate","_noop","noop","_trace","trace","started","finished","_otelSpanContext","toTraceId","get128bitId","arguments","length","toBuffer","toString","padStart","toSpanId","toTraceparent","flags","priority","version","module","exports"],"sources":["/Users/ibraheem.aboulnaga/rum-traces-example-app/node_modules/dd-trace/packages/dd-trace/src/opentracing/span_context.js"],"sourcesContent":["'use strict'\n\nconst { AUTO_KEEP } = require('../../../../ext/priority')\n\n// the lowercase, hex encoded upper 64 bits of a 128-bit trace id, if present\nconst TRACE_ID_128 = '_dd.p.tid'\n\nclass DatadogSpanContext {\n  constructor (props) {\n    props = props || {}\n\n    this._traceId = props.traceId\n    this._spanId = props.spanId\n    this._isRemote = props.isRemote ?? true\n    this._parentId = props.parentId || null\n    this._name = props.name\n    this._isFinished = props.isFinished || false\n    this._tags = props.tags || {}\n    this._sampling = props.sampling || {}\n    this._spanSampling = undefined\n    this._links = props.links || []\n    this._baggageItems = props.baggageItems || {}\n    this._traceparent = props.traceparent\n    this._tracestate = props.tracestate\n    this._noop = props.noop || null\n    this._trace = props.trace || {\n      started: [],\n      finished: [],\n      tags: {}\n    }\n    this._otelSpanContext = undefined\n  }\n\n  toTraceId (get128bitId = false) {\n    if (get128bitId) {\n      return this._traceId.toBuffer().length <= 8 && this._trace.tags[TRACE_ID_128]\n        ? this._trace.tags[TRACE_ID_128] + this._traceId.toString(16).padStart(16, '0')\n        : this._traceId.toString(16).padStart(32, '0')\n    }\n    return this._traceId.toString(10)\n  }\n\n  toSpanId (get128bitId = false) {\n    if (get128bitId) {\n      return this._spanId.toString(16).padStart(16, '0')\n    }\n    return this._spanId.toString(10)\n  }\n\n  toTraceparent () {\n    const flags = this._sampling.priority >= AUTO_KEEP ? '01' : '00'\n    const traceId = this.toTraceId(true)\n    const spanId = this.toSpanId(true)\n    const version = (this._traceparent && this._traceparent.version) || '00'\n    return `${version}-${traceId}-${spanId}-${flags}`\n  }\n}\n\nmodule.exports = DatadogSpanContext\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}